Subject: Technical Notes on Istio mTLS and Gateway Certificates with Vault Injector and cert-manager
Hi Team,
Below is a technical comparison of how Vault Injector and cert-manager interact with Istio for both workload mTLS and Gateway TLS termination. This outlines possibilities and concerns for each approach.
1. Vault Injector + Istio mTLS (workload sidecars)
How it works
Vault Agent Injector mounts certificates/keys as files inside workload pods.
Applications can consume these files for TLS.
Concerns
Istio Envoy sidecars do not consume file-mounted certs; they expect certificates via SDS (Secret Discovery Service) from istiod/istio-agent.
Envoy does not automatically reload certificates from files; rotation requires sidecar restarts or custom logic.
Using Vault Injector for workload mTLS creates a mismatch with Istio’s identity model.
Possibility
A custom SDS adapter could be developed to fetch certs from Vault PKI and serve them to Envoy, but this adds operational complexity.
2. cert-manager + Istio mTLS (workload sidecars)
How it works
cert-manager manages the CA or integrates with Istio using istio-csr.
Istio agent requests workload certs, which are signed and delivered via SDS to Envoy sidecars.
Certificates are short-lived (default ~24h) and rotated automatically.
Concerns
Requires managing CA material securely (cert-manager secrets).
Integration steps differ depending on whether Istiod uses cert-manager’s CA or istio-csr forwards CSRs to cert-manager.
Possibility
cert-manager can use Vault as an Issuer, enabling Vault PKI to remain the source of truth while still supporting Istio SDS.
3. Vault Injector + Istio Gateway (TLS termination)
How it works
Vault Agent Injector writes TLS certs/keys into volumes mounted in the ingressgateway pod.
Istio Gateway references those files via credentialName or configured file paths.
Pilot Agent can reload Envoy if the files change.
Concerns
Requires modifying the Istio ingressgateway deployment to include Vault Injector.
Must ensure certs are written at paths that Pilot Agent is watching.
Operational overhead in synchronizing Vault renewal with Envoy reloads.
Possibility
Can be used for long-lived certificates (e.g., 90d–1y) issued from Vault PKI.
Provides central Vault auditing and policy enforcement.
4. cert-manager + Istio Gateway (TLS termination)
How it works
cert-manager requests certificates from an Issuer (ACME, Vault, corporate CA).
Certificates are stored in Kubernetes Secrets or mounted via cert-manager CSI driver.
Istio Gateway references the Secret via credentialName; Pilot Agent watches for changes and reloads Envoy.
Concerns
If private keys are stored in Secrets, they reside in etcd; requires proper RBAC and encryption at rest.
Additional moving parts (cert-manager controllers, CSI driver) add operational components.
Possibility
Works with both medium-lived certs (e.g., 90d ACME) and longer-lived enterprise-issued certs.
cert-manager Vault Issuer allows Vault PKI to remain the backend CA while cert-manager handles renewal and Kubernetes integration.
Summary
Vault Injector is primarily file-based injection, which does not align with Istio’s SDS-based workload mTLS but can be adapted for Gateway TLS.
cert-manager integrates directly with Istio SDS for workloads and with Kubernetes Secrets/CSI for Gateways, enabling both short-lived and longer-lived cert handling.
Both Vault Injector and cert-manager can involve Vault PKI, but the integration patterns differ.
Thanks,
[Your Name]
Do you also want me to prepare a visual architecture diagram with these four quadrants (Workload mTLS vs Gateway TLS, Vault vs cert-manager) so it’s easier for leadership to absorb?